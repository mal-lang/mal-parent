#!/usr/bin/expect -f

set keyname [lindex $argv 0]
set timeout 600
log_user 0

spawn gpg --edit-key "$keyname"
expect -exact "gpg> "
send -- "trust\r"
expect -exact "Your decision? "
send -- "5\r"
expect -exact "Do you really want to set this key to ultimate trust? (y/N) "
send -- "y\r"
expect -exact "gpg> "
send -- "quit\r"
expect eof
